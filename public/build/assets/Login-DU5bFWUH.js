import{Q as y,r as v,o as t,c as x,w as m,a as s,u as h,Z as k,f as l,t as c,g as V,b as r,h as M,F as B,d as O,n as N,e as $,O as u,i as j,v as q}from"./app-Xp4tkxNa.js";import{_ as C}from"./GuestLayout-BtkQF2rO.js";import{_ as n,a as g}from"./InputLabel-DvKXdejD.js";import{P as L}from"./PrimaryButton-BzuRwUas.js";import{_ as p}from"./TextInput-BNmORHAh.js";import"./ApplicationLogo-S38s81xD.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={key:0,class:"mb-4 font-medium text-sm text-red-500"},D={class:"flex justify-between gap-2 mb-3"},F=["id","value"],P=["for"],S={class:"mt-4"},z={class:"flex items-center justify-end mt-4"},H={__name:"Login",props:{guardOptions:{type:Object}},setup(f){y();const e=v({guard:"",username:"",password:"",processing:!1,errors:{guard:"",username:"",password:""},errorMessage:""}),b=()=>{e.processing=!0,e.errorMessage="",axios.post("oauth/token",{guard:e.guard,username:e.username,password:e.password}).then(d=>{if(e.guard==="teacher")return u.visit("/course",{method:"get"});if(e.guard==="student")return u.visit("/my-course",{method:"get"});u.visit("/",{method:"get"})}).catch(d=>{e.errorMessage=d.response.data.message}).finally(()=>{e.processing=!1})};return(d,a)=>(t(),x(C,null,{default:m(()=>[s(h(k),{title:"Log in"}),e.errorMessage?(t(),l("div",U,c(e.errorMessage),1)):V("",!0),r("form",{onSubmit:$(b,["prevent"])},[r("div",null,[s(n,{for:"",value:"请选择",class:"mb-1"}),r("div",D,[(t(!0),l(B,null,M(f.guardOptions,(o,i,_)=>(t(),l("div",{key:_,class:"flex w-1/2 items-center ps-4 border border-gray-200 rounded dark:border-gray-700"},[j(r("input",{id:"bordered-radio-"+i,required:"","onUpdate:modelValue":a[0]||(a[0]=w=>e.guard=w),type:"radio",value:i,name:"bordered-radio",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"},null,8,F),[[q,e.guard]]),r("label",{for:"bordered-radio-"+i,class:"w-full py-4 ms-2 text-sm font-medium text-gray-900 dark:text-gray-300"},c(o),9,P)]))),128))])]),r("div",null,[s(n,{for:"username",value:"用户名"}),s(p,{id:"username",type:"text",class:"mt-1 block w-full",modelValue:e.username,"onUpdate:modelValue":a[1]||(a[1]=o=>e.username=o),required:"",autofocus:"",autocomplete:"username"},null,8,["modelValue"]),s(g,{class:"mt-2",message:e.errors.username},null,8,["message"])]),r("div",S,[s(n,{for:"password",value:"密码"}),s(p,{id:"password",type:"password",class:"mt-1 block w-full",modelValue:e.password,"onUpdate:modelValue":a[2]||(a[2]=o=>e.password=o),required:"",autocomplete:"current-password"},null,8,["modelValue"]),s(g,{class:"mt-2",message:e.errors.password},null,8,["message"])]),r("div",z,[s(L,{class:N(["ms-4",{"opacity-25":e.processing}]),disabled:e.processing},{default:m(()=>[O(" 登录 ")]),_:1},8,["class","disabled"])])],32)]),_:1}))}};export{H as default};
